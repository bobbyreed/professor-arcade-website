<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" type="image/x-icon" href="./media/logo/logo.png">
    <title>Welcome to Professor Arcade!</title>
</head>
<body>
    <div id=banner>
        <img src="./media/logo/logo.png" alt="Professor Arcade Logo" id="logo">
        <h1>Welcome to Professor Arcade!</h1>
    </div>
    <nav>
        <a href="#"><button>Home/Games<span class="home"><!--js will insert here--></span></button></a>
        <a href="./pages/about.html"><button>About<span class="about"><!--js will insert here--></span></button></a>
        <a href="./pages/contact.html"><button>Contact<span class="contact"><!--js will insert here--></span></button></a>
        <a href="./pages/blog.html"><button>Blog<span class="blog"><!--js will insert here--></span></button></a>
    </nav>
    <div id="game-list">
        <!-- Game entries will be dynamically inserted here -->
    </div>

    <!-- below creates the game list on index by reading constants.js. new games should be added there. -->
    <script type="module">
    import { GAMES } from './js/games.js';

    console.log("Game List script loaded");

    const gameArray = Object.keys(GAMES).map(key => ({
        name: GAMES[key].title,
        author: GAMES[key].author,
        authorGithubURL: GAMES[key].authorGithubURL,
        description: GAMES[key].description,
        url: GAMES[key].url,
        coverImage: GAMES[key].coverImage,
        screenshot: GAMES[key].screenshot
    }));

    createGameList(gameArray);
    function createGameList(games) {
        const gameListDiv = document.getElementById('game-list');

        games.forEach(game => {
            const gameEntry = document.createElement('div');
            gameEntry.className = 'game-entry';
            //Cartridge design from manz.dev
                //https://www.reddit.com/r/webdev/comments/18fjmyf/nintendo_gameboy_cartridge_css/
            const cartridge = document.createElement('cartridge');
            const cartridgeStyle = document.createElement('style')
            const cartridgeContainer = document.createElement('div');
            cartridgeContainer.className = 'container';
            const cartridgeHeader = document.createElement('cartridge-header');
            const cartridgeTopLeft = document.createElement('div');
            cartridgeTopLeft.className = 'cartridge-top-left';
            const cartridgeNotch = document.createElement('div');
            cartridgeNotch.className = 'cartridge-notch';
            const cartridgeTopRight = document.createElement('div');
            cartridgeTopRight.className = 'cartridge-top-right';
            const cartridgeBody = document.createElement('div');
            cartridgeBody.className = 'cartridge-body';
            const cartridgeEnd = document.createElement('div');
            cartridgeEnd.className = 'cartridge-end';
            const cartridgeLabel = document.createElement('div');
            cartridgeLabel.className = 'cartridge-label';
            const gameLabelText = document.createElement('p');
            gameLabelText.textContent = "Click below to play!";
            const gameLabelTextStyle = document.createElement('style');
            gameLabelTextStyle.textContent = `
                .cartridge-label p {
                    margin: 0;
                    font-size: 5px;
                    color: white;
                }
            `;
            const cartridgeLabelStyle = document.createElement('style');
            cartridgeLabelStyle.textContent = `
                .cartridge-label p{
                    display: flex;
                    align-self: flex-start;
                    justify-self: flex-start;
                    font-family: 'Arial', sans-serif;
                    font-weight: bold;
                    color: white;
                }
                .cartridge-label a {
                    color: goldenrod;
                    padding: 3px;
                    text-decoration: none;
                }
                .cartridge-label a:hover {
                    text-decoration: underline;
                }
            `;
            const gameAuthorText = document.createElement('p');
            gameAuthorText.textContent = "Created by:";
            const gameAuthorTextStyle = document.createElement('style');
            gameAuthorTextStyle.textContent = `
                .cartridge-label p {
                    margin: 0;
                    font-size: 5px;
                    color: white;
                }
            `;
            const cartridgeAuthorStyle = document.createElement('style');
            cartridgeAuthorStyle.textContent = `
                .cartridge-label p{
                    display: flex;
                    align-self: flex-start;
                    justify-self: flex-start;
                    font-family: 'Arial', sans-serif;
                    font-weight: bold;
                    color: white;
                }
                .cartridge-label a {
                    color: goldenrod;
                    padding: 3px;
                    text-decoration: none;
                }
                .cartridge-label a:hover {
                    text-decoration: underline;
                }
            `;

            const gameImg = document.createElement('img');
            gameImg.src = game.coverImage;
            gameImg.alt = `${game.name} cover`;
            gameImg.className = 'game-cover-image';

            const gameLink = document.createElement('a');
            gameLink.href = game.url;
            gameLink.target = '_blank';
            gameLink.rel = 'noopener noreferrer';
            gameLink.textContent = game.name;

            const authorLink = document.createElement('a');
            authorLink.href = `https://${game.authorGithubURL}`;
            authorLink.target = '_blank';
            authorLink.rel = 'noopener noreferrer';
            authorLink.textContent = game.author;

            const gameDesc = document.createElement('p');
            gameDesc.textContent = game.description;
            gameDesc.className = 'game-description';

            const gameSS = document.createElement('img');
            gameSS.src = game.screenshot;
            gameSS.alt = `${game.name} screenshot`;
            gameSS.className = 'game-screenshot';

            //assemble cartridge
            cartridge.appendChild(cartridgeStyle);
            cartridge.appendChild(cartridgeContainer);
            cartridgeContainer.appendChild(cartridgeNotch);
            cartridgeContainer.appendChild(cartridgeTopLeft);
            cartridgeContainer.appendChild(cartridgeTopRight);
            cartridgeContainer.appendChild(cartridgeHeader);
            cartridgeContainer.appendChild(cartridgeBody);
            cartridgeBody.appendChild(gameImg);
            cartridgeBody.appendChild(cartridgeEnd);
            cartridgeLabel.appendChild(gameLabelText);
            cartridgeLabel.appendChild(gameLink);
            cartridgeLabel.appendChild(gameAuthorText);
            cartridgeLabel.appendChild(authorLink);

            //assemble gameEntry
            gameEntry.appendChild(cartridge);
            gameEntry.appendChild(cartridgeLabel);
            gameEntry.appendChild(cartridgeLabelStyle);
            gameEntry.appendChild(gameDesc);
            gameEntry.appendChild(gameSS);

            //add gameEntry to gameList
            gameListDiv.appendChild(gameEntry);
        });
    }
    </script>
    <script src="./script.js" type="module"></script>
    
</body>
</html>