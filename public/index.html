<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" type="image/x-icon" href="./media/logo/logo.png">
    <title>Welcome to Professor Arcade!</title>
</head>
<body>
    <div id=banner>
        <img src="./media/logo/logo.png" alt="Professor Arcade Logo" id="logo">
        <h1>Welcome to Professor Arcade!</h1>
    </div>
    <nav>
        <a href="#"><button>Home/Games<span class="home"><!--js will insert here--></span></button></a>
        <a href="./pages/about.html"><button>About<span class="about"><!--js will insert here--></span></button></a>
        <a href="./pages/contact.html"><button>Contact<span class="contact"><!--js will insert here--></span></button></a>
        <a href="./pages/blog.html"><button>Blog<span class="blog"><!--js will insert here--></span></button></a>
    </nav>
    <div id="game-list">
        <!-- Game entries will be dynamically inserted here -->
    </div>

    <!-- below creates the game list on index by reading constants.js. new games should be added there. -->
    <script type="module">
    import { GAMES } from './js/games.js';

    console.log("Game List script loaded");

    const gameArray = Object.keys(GAMES).map(key => ({
        name: GAMES[key].title,
        author: GAMES[key].author,
        authorGithubURL: GAMES[key].authorGithubURL,
        description: GAMES[key].description,
        url: GAMES[key].url,
        coverImage: GAMES[key].coverImage,
        screenshot: GAMES[key].screenshot
    }));

    createGameList(gameArray);
    function createGameList(games) {
        const gameListDiv = document.getElementById('game-list');

        games.forEach(game => {
            const gameEntry = document.createElement('div');
            gameEntry.className = 'nes-container';
            //Cartridge design from manz.dev
                //https://www.reddit.com/r/webdev/comments/18fjmyf/nintendo_gameboy_cartridge_css/
            const cartridge = document.createElement('cartridge');
            cartridge.className = 'nes';
            const leftNotchLeft = document.createElement('div');
            leftNotchLeft.className = 'left-notch-left';
            const leftNotch = document.createElement('div');
            leftNotch.className = 'left-notch';
            const leftNotchRight = document.createElement('div');
            leftNotchRight.className = 'left-notch-right';
            const grip = document.createElement('div');
            grip.className = 'grip';

            //cover img div > svg > image
            //div
            const coverImage = document.createElement('div');
            coverImage.className = 'cover-image';
            //svg
            const coverImageSVG = document.createElement('svg');
            coverImageSVG.className = 'label-svg';
            coverImageSVG.style = 'border-radius: 0px 0px 10px 10px;';
            coverImageSVG.viewBox = "0 0 300 335";
            coverImageSVG.preserveAspectRatio="xMidyMid meet";
            coverImageSVG.xmlns="http://www.w3.org/2000/svg";
            //image
            const coverImageImage = document.createElement('img');
            coverImageImage.id = "user-label-image";
            coverImageImage.src = game.coverImage;
            coverImageImage.alt = "user uploaded label";

            const rightNotchLeft = document.createElement('div');
            rightNotchLeft.className = 'right-notch-left';
            const rightNotch = document.createElement('div');
            rightNotch.className = 'right-notch';
            const rightNotchRight = document.createElement('div');
            rightNotchRight.className = 'right-notch-right';
            const leftSide = document.createElement('div');
            leftSide.className = 'left-side';
            const gripExtend = document.createElement('div');
            gripExtend.className = 'grip-extend';
            const rightSide = document.createElement('div');
            rightSide.className = 'right-side';
            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            const arrowSVG = document.createElement('svg');
            arrowSVG.viewBox = "0 0 200 200";
            arrowSVG.preserveAspectRatio="xMidYMid meet";
            arrowSVG.xmlns = "http://www.w3.org/2000/svg";
            const arrowPoly = document.createElement('polygon');
            arrowPoly.points="100, 20 180, 180 20, 180";
            arrowPoly.style="fill: rbg(83,83,83);"
            const leftBottomSide = document.createElement('div');
            leftBottomSide.className = 'left-bottom-side';
            const bottomGrip = document.createElement('div');
            bottomGrip.className = 'bottom-grip';
            const rightBottomSide = document.createElement('div');
            rightBottomSide.className = 'right-bottom-side';

            //game label
            const gameLabel = document.createElement('div');
            gameLabel.className = 'game-label';
            const gameLabelButton = document.createElement('button');
            gameLabelButton.className = 'game-label-button'
            const gameLabelText = document.createElement('p');
            gameLabelText.textContent = "Click below to play!";
            const gameLabelTextStyle = document.createElement('style');
            gameLabelTextStyle.textContent = `
                .cartridge-label p {
                    margin: 0;
                    font-size: 5px;
                    color: white;
                }
            `;
            const cartridgeLabelStyle = document.createElement('style');
            cartridgeLabelStyle.textContent = `
                .cartridge-label p{
                    display: flex;
                    align-self: flex-start;
                    justify-self: flex-start;
                    font-family: 'Arial', sans-serif;
                    font-weight: bold;
                    color: white;
                }
                .cartridge-label a {
                    color: goldenrod;
                    padding: 3px;
                    text-decoration: none;
                }
                .cartridge-label a:hover {
                    text-decoration: underline;
                }
            `;
            const gameAuthorText = document.createElement('p');
            gameAuthorText.textContent = "Created by:";
            const gameAuthorTextStyle = document.createElement('style');
            gameAuthorTextStyle.textContent = `
                .cartridge-label p {
                    margin: 0;
                    font-size: 5px;
                    color: white;
                }
            `;
            const cartridgeAuthorStyle = document.createElement('style');
            cartridgeAuthorStyle.textContent = `
                .cartridge-label p{
                    display: flex;
                    align-self: flex-start;
                    justify-self: flex-start;
                    font-family: 'Arial', sans-serif;
                    font-weight: bold;
                    color: white;
                }
                .cartridge-label a {
                    color: goldenrod;
                    padding: 3px;
                    text-decoration: none;
                }
                .cartridge-label a:hover {
                    text-decoration: underline;
                }
            `;

            const gameImg = document.createElement('img');
            gameImg.src = game.coverImage;
            gameImg.alt = `${game.name} cover`;
            gameImg.className = 'game-cover-image';

            const gameLink = document.createElement('a');
            gameLink.href = game.url;
            gameLink.target = '_blank';
            gameLink.rel = 'noopener noreferrer';
            gameLink.textContent = game.name;

            const authorLink = document.createElement('a');
            authorLink.href = `https://${game.authorGithubURL}`;
            authorLink.target = '_blank';
            authorLink.rel = 'noopener noreferrer';
            authorLink.textContent = game.author;

            const gameDesc = document.createElement('p');
            const gameDescTitle = document.createElement('h2');
            gameDescTitle.textContent = "Description"
            gameDesc.textContent = game.description;
            gameDesc.className = 'game-description';

            const gameSS = document.createElement('img');
            const gameSSText = document.createElement('h2');
            gameSSText.textContent = "Screenshot(s)"
            gameSS.src = game.screenshot;
            gameSS.alt = `${game.name} screenshot`;
            gameSS.className = 'game-screenshot';

            //assemble cartridge
            cartridge.appendChild(leftNotchLeft);
            cartridge.appendChild(leftNotch);
            cartridge.appendChild(leftNotchRight);
            cartridge.appendChild(grip);
            cartridge.appendChild(coverImage);
            coverImage.appendChild(coverImageSVG);
            coverImageSVG.appendChild(coverImageImage);
            cartridge.appendChild(rightNotchLeft);
            cartridge.appendChild(rightNotch);
            cartridge.appendChild(rightNotchRight);
            cartridge.appendChild(leftSide);
            cartridge.appendChild(gripExtend);
            cartridge.appendChild(rightSide);
            cartridge.appendChild(arrow);
            arrow.appendChild(arrowSVG);
            arrowSVG.appendChild(arrowPoly);
            cartridge.appendChild(leftBottomSide);
            cartridge.appendChild(bottomGrip);
            cartridge.appendChild(rightBottomSide);

            //game label
            gameLabel.appendChild(gameLabelText);
            gameLabel.appendChild(gameLink);
            gameLabel.appendChild(gameAuthorText);
            gameLabel.appendChild(authorLink);

            //assemble gameEntry
            gameEntry.appendChild(cartridge);
            gameEntry.appendChild(gameLabel);
            gameEntry.appendChild(cartridgeLabelStyle);
            gameEntry.appendChild(gameDescTitle);
            gameEntry.appendChild(gameDesc);
            gameEntry.appendChild(gameSSText);
            gameEntry.appendChild(gameSS);

            //add gameEntry to gameList
            gameListDiv.appendChild(gameEntry);
        });
    }
    </script>
    <script src="./script.js" type="module"></script>
    
</body>
</html>